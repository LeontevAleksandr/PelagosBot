# –ê–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç—ã —Å Pelagos API

## –ü–æ–∏—Å–∫

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ ([utils/search_utils.py](utils/search_utils.py))

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `rapidfuzz` –¥–ª—è –Ω–µ—á–µ—Ç–∫–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞:

- **fuzzy_search()** - –Ω–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫ —Å –ø–æ—Ä–æ–≥–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- **simple_search()** - –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –ø–æ –≤—Ö–æ–∂–¥–µ–Ω–∏—é –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
- **hybrid_search()** - –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å—Ç–æ–π + —É–º–Ω—ã–π –Ω–µ—á–µ—Ç–∫–∏–π)

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞ ([handlers/search.py](handlers/search.py))

–§–ª–æ—É –ø–æ–∏—Å–∫–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "üîç –ü–æ–∏—Å–∫"
2. –í—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é: –û—Ç–µ–ª–∏ / –≠–∫—Å–∫—É—Ä—Å–∏–∏ / –¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã
3. –í–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
4. –°–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ API
5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞:
- **–û—Ç–µ–ª–∏** - –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ª–æ–∫–∞—Ü–∏—è–º (cebu, boracay, bohol, palawan, manila-luson)
- **–≠–∫—Å–∫—É—Ä—Å–∏–∏** - –ø–æ–∏—Å–∫ –ø–æ —É—Å–ª—É–≥–∞–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (subtype != 1200)
- **–¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã** - –ø–æ–∏—Å–∫ –ø–æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞–º (subtype = 1200)

–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞:
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è: 50%
- –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: 10
- –ü–æ–∫–∞–∑ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö: –ø–µ—Ä–≤—ã–µ 5 —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `token_set_ratio` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –∏ —Ä–∞–∑–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Å–ª–æ–≤

## –û–±–∑–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 1. API Client ([services/api_client.py](services/api_client.py))
–ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `aiohttp` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Key` —Å API –∫–ª—é—á–æ–º
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏ —Ç–∞–π–º–∞—É—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç GET –∏ POST –∑–∞–ø—Ä–æ—Å—ã

### 2. Pelagos API Service ([services/pelagos_api.py](services/pelagos_api.py))
–°–µ—Ä–≤–∏—Å-–æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ API –∫–ª–∏–µ–Ω—Ç–æ–º:
- –†–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥–∏–æ–Ω–∞–º–∏, –æ—Ç–µ–ª—è–º–∏, –Ω–æ–º–µ—Ä–∞–º–∏, —É—Å–ª—É–≥–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –ú–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –ø–æ –æ—Ç–µ–ª—è–º –∏ —É—Å–ª—É–≥–∞–º
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç JSON –æ—Ç–≤–µ—Ç—ã –≤ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

### 3. –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö ([services/schemas.py](services/schemas.py))
–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–æ–¥–∞–º–∏ `from_dict()`:
- `Region` - —Ä–µ–≥–∏–æ–Ω—ã –∏ –ª–æ–∫–∞—Ü–∏–∏
- `Hotel` - –æ—Ç–µ–ª–∏
- `HotelRoom` - –Ω–æ–º–µ—Ä–∞ –≤ –æ—Ç–µ–ª—è—Ö
- `Service` - —É—Å–ª—É–≥–∏ (—ç–∫—Å–∫—É—Ä—Å–∏–∏, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä—ã)
- `RoomPrices` - —Ü–µ–Ω—ã –Ω–∞ –Ω–æ–º–µ—Ä–∞
- `Pagination` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```python
from services.pelagos_api import PelagosAPI

api = PelagosAPI(api_key='–≤–∞—à_–∫–ª—é—á_api')
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤
```python
# –í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã
regions = await api.get_regions()

# –¢–æ–ª—å–∫–æ –∫–æ—Ä–Ω–µ–≤—ã–µ —Ä–µ–≥–∏–æ–Ω—ã (–±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π)
root_regions = await api.get_root_regions()

# –ü–æ–∏—Å–∫ —Ä–µ–≥–∏–æ–Ω–∞ –ø–æ –∫–æ–¥—É
region = await api.get_region_by_code('cebu')
```

### –†–∞–±–æ—Ç–∞ —Å –æ—Ç–µ–ª—è–º–∏
```python
# –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–µ–ª–∏ —Ä–µ–≥–∏–æ–Ω–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
result = await api.get_hotels('cebu', perpage=20, start=0)
hotels = result['hotels']
pagination = result['pagination']

# –ü–æ–ª—É—á–∏—Ç—å –í–°–ï –æ—Ç–µ–ª–∏ —Ä–µ–≥–∏–æ–Ω–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è)
all_hotels = await api.get_all_hotels('cebu')

# –ü–æ–∏—Å–∫ –æ—Ç–µ–ª–µ–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
hotels = await api.search_hotels('Shangri-La', limit=10)
```

### –†–∞–±–æ—Ç–∞ —Å –Ω–æ–º–µ—Ä–∞–º–∏
```python
# –ù–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
result = await api.get_rooms(hotel_id=240, perpage=20)
rooms = result['rooms']

# –í—Å–µ –Ω–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è
all_rooms = await api.get_all_rooms(hotel_id=240)

# –¶–µ–Ω—ã –Ω–∞ –Ω–æ–º–µ—Ä
prices = await api.get_room_prices(room_id=717)
```

### –†–∞–±–æ—Ç–∞ —Å —É—Å–ª—É–≥–∞–º–∏
```python
# –ü–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
result = await api.get_services(perpage=20, start=0)
services = result['services']

# –í—Å–µ —É—Å–ª—É–≥–∏
all_services = await api.get_all_services()

# –ü–æ–∏—Å–∫ —É—Å–ª—É–≥
services = await api.search_services('—ç–∫—Å–∫—É—Ä—Å–∏—è', limit=10)
```

## –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ API

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤
- –†–µ–≥–∏–æ–Ω—ã –≤—ã—Å—Ç—Ä–æ–µ–Ω—ã –≤ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ï—Å—Ç—å –∫–æ—Ä–Ω–µ–≤—ã–µ —Ä–µ–≥–∏–æ–Ω—ã (parent = 0 –∏–ª–∏ None)
- –ï—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω—ã (parent != 0)
- **–í–ê–ñ–ù–û**: –ó–∞–ø—Ä–æ—Å—ã –æ—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤!
  - `cebu`, `manila-luson`, `boracay` - —Ä–∞–±–æ—Ç–∞—é—Ç ‚úì
  - `general` - –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úó

### 2. –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API
```
GET /export-locations/                          - –°–ø–∏—Å–æ–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤
GET /export-hotels/{location_code}/             - –û—Ç–µ–ª–∏ —Ä–µ–≥–∏–æ–Ω–∞
GET /export-hotels-rooms/{hotel_id}/            - –ù–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è
GET /export-hotels-rooms-prices/{room_id}/      - –¶–µ–Ω—ã –Ω–∞ –Ω–æ–º–µ—Ä
GET /export-services/                            - –£—Å–ª—É–≥–∏
GET /export-hotel/{hotel_id}/                   - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–µ–ª–µ
GET /export-services-xml/?cache=1               - XML —Å —É—Å–ª—É–≥–∞–º–∏
GET /export-rooms-xml/?cache=1                  - XML —Å –Ω–æ–º–µ—Ä–∞–º–∏
GET /group-tours/{date}/?list=1&location={id}   - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏
GET /group-tours/{date}/flex/?calendar=1&location={id} - –ü–æ–∏—Å–∫ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ (–∫–∞–ª–µ–Ω–¥–∞—Ä—å)
GET /group-tours-event/{event_id}/?extend=1     - –î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è –ø–æ–ø—É—Ç—á–∏–∫–∞
```

### 3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- `start` - –Ω–∞—á–∞–ª–æ (0 - –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç)
- `perpage` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø–æ–ª–µ `pages` –æ—Ç–≤–µ—Ç–∞

### 4. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
X-Key: –≤–∞—à_api_–∫–ª—é—á
```

### 5. –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
```json
{
  "code": "OK",
  "locations": [...],  // –∏–ª–∏ hotels, services, rooms
  "pages": {
    "total": 100,
    "perpage": 20,
    "start": 0
  }
}
```

–ü—Ä–∏ –æ—à–∏–±–∫–µ:
```json
{
  "code": "Error",
  "message": "—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏"
}
```

## –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ–ª–µ `pics`:
```python
{
  "id": 123,
  "md5": "abc123...",
  "filename": "hotel.jpg",
  "ext": "jpg",
  "size": 102400
}
```

### URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
- –ü–æ–ª–Ω–æ–µ: `https://app.pelagos.ru/pic/{md5}/{filename}`
- –ü—Ä–æ—Å—Ç–æ–π: `https://app.pelagos.ru/pic/{md5}/{md5}.{ext}`
- –ú–∏–Ω–∏–∞—Ç—é—Ä–∞: `https://app.pelagos.ru/thumb/{md5}/{filename}`
- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: `https://app.pelagos.ru/freepic/{md5}/{filename}?opts=inner&size=300x200`

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```txt
aiohttp==3.9.1    - –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
python te_api.py
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤
2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
3. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–µ–ª–µ–π –ø–æ —Ä–µ–≥–∏–æ–Ω—É
4. –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Å–ª—É–≥
5. –ü–æ–∏—Å–∫ –æ—Ç–µ–ª–µ–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç–æ–¥–∞ `from_dict()`** - –¥–æ–±–∞–≤–ª–µ–Ω—ã classmethod –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Å—Ä–µ–∑ `await func()[:2]` –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. **–ó–∞–ø—Ä–æ—Å—ã –∫ –∫–æ—Ä–Ω–µ–≤—ã–º —Ä–µ–≥–∏–æ–Ω–∞–º** - –ø–æ–∏—Å–∫ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω—ã
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ aiohttp** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ requirements.txt

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. –í—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã:
   ```python
   await api.close()
   ```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–µ–ª–µ–π (cebu, boracay, manila-luson –∏ —Ç.–¥.)

3. –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `get_all_*` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ —Å–ø–∏—Å–∫–∏ –∏–ª–∏ None

## –ü–æ–∏—Å–∫ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ (Companions)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤

–ü–æ–∏—Å–∫ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ flex API, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ª—é–¥—è—Ö, –∏—â—É—â–∏—Ö –ø–æ–ø—É—Ç—á–∏–∫–æ–≤.

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ–ø—É—Ç—á–∏–∫–æ–≤
```python
# –ü–æ–ª—É—á–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å —ç–∫—Å–∫—É—Ä—Å–∏—è–º–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤
days = await api.get_companions_calendar(location_id=9, date="21.12.2025")

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:
# days = [
#   {
#     "dt": 1767369600,
#     "date": "03.01.2026",
#     "mon": 1,
#     "year": "2026",
#     "events": [
#       {
#         "id": 285,  # ID —Å–æ–±—ã—Ç–∏—è (event_id)
#         "service_id": 18964,  # ID —É—Å–ª—É–≥–∏
#         "pax": 2,  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –∏—â—É—â–∏—Ö –ø–æ–ø—É—Ç—á–∏–∫–æ–≤
#         "service": {
#           "id": 18964,
#           "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏",
#           "location": 9,
#           "russian_guide": 10,
#           "pic": {...}
#         }
#       }
#     ]
#   }
# ]
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —Å–æ–±—ã—Ç–∏—è –ø–æ–ø—É—Ç—á–∏–∫–∞
```python
# –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–±—ã—Ç–∏–∏
event_details = await api.get_companion_event_details(event_id=285)

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç:
# - –ü–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ä–≤–∏—Å–µ (service)
# - –°–ø–∏—Å–æ–∫ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ (slst) —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
# - –¶–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª—é–¥–µ–π (rlst)
# - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (pics)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ü–µ–Ω (rlst)

```python
# rlst —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ü–µ–Ω–∞—Ö –¥–ª—è —Ä–∞–∑–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–µ–ª–æ–≤–µ–∫
"rlst": [
  {
    "clst": [
      {"grp": 1, "price": 365},  # –¶–µ–Ω–∞ –∑–∞ —á–µ–ª–æ–≤–µ–∫–∞ –¥–ª—è 1 —á–µ–ª.
      {"grp": 2, "price": 220},  # –¶–µ–Ω–∞ –∑–∞ —á–µ–ª–æ–≤–µ–∫–∞ –¥–ª—è 2 —á–µ–ª.
      {"grp": 3, "price": 195},  # –¶–µ–Ω–∞ –∑–∞ —á–µ–ª–æ–≤–µ–∫–∞ –¥–ª—è 3 —á–µ–ª.
      {"grp": 4, "price": 180},  # –∏ —Ç.–¥.
    ]
  }
]
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ (slst)

```python
# slst —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ª—é–¥–µ–π, –∏—â—É—â–∏—Ö –ø–æ–ø—É—Ç—á–∏–∫–æ–≤
"slst": [
  {
    "id": 157,
    "title": "–ê–Ω–Ω–∞",
    "pax": 2,  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –≤ –≥—Ä—É–ø–ø–µ
    "phone": "+7 950 209-02-91",
    "tg": ""
  }
]
```

### –í–∞–∂–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –≥—Ä—É–ø–ø–æ–≤—ã—Ö —ç–∫—Å–∫—É—Ä—Å–∏–π

1. **ID**: –î–ª—è –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `event_id`, –∞ –Ω–µ `service_id`
2. **–¶–µ–Ω—ã**: –¶–µ–Ω—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–µ–ª–æ–≤–µ–∫ –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `rlst.clst`
3. **–¢–∏–ø**: –≠—Ç–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏, –Ω–æ —Å –ø–æ–∏—Å–∫–æ–º –ø–æ–ø—É—Ç—á–∏–∫–æ–≤
4. **API endpoint**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/group-tours/{date}/flex/` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `calendar=1`
